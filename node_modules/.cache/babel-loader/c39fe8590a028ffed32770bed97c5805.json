{"ast":null,"code":"import _toConsumableArray from \"/home/den/project/etagiToDo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/den/project/etagiToDo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { getAllTasks, deleteTask, putTask } from \"../apiService\";\nimport moment from 'moment';\nimport { SWITCH_BUTTON } from \"../reducers/listTaskReducers\";\nexport var TASK = \"GET_TASKS\";\nexport var FILTER_TASKS = \"FILTER_TASKS\";\nexport var EDIT_TASK = \"EDIT_TASK\";\nexport var CLEAN_FORM = \"CLEAN_FORM\";\nexport var IS_OPEN_FORM = \"IS_OPEN_FORM\";\n\nvar searchTasksForOneDay = function searchTasksForOneDay(date) {\n  return getAllTasks().filter(function (task) {\n    return moment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === date;\n  });\n};\n\nexport var delTask = function delTask(id) {\n  return function (dispatch) {\n    deleteTask(id);\n    var tasks = getAllTasks();\n    dispatch({\n      type: TASK,\n      payload: tasks\n    });\n  };\n};\nexport var editTask = function editTask(id) {\n  return function (dispatch) {\n    var tasks = getAllTasks().filter(function (t) {\n      return t.id === id;\n    })[0];\n    dispatch({\n      type: EDIT_TASK,\n      payload: tasks\n    });\n    dispatch({\n      type: IS_OPEN_FORM,\n      payload: true\n    });\n  };\n};\nexport var editTaskFromForm = function editTaskFromForm(body) {\n  return function (dispatch) {\n    var cleanBody = _objectSpread({}, body);\n\n    delete cleanBody.type;\n    putTask(cleanBody);\n    var tasks = getAllTasks();\n    dispatch({\n      type: TASK,\n      payload: tasks\n    });\n    dispatch({\n      type: IS_OPEN_FORM,\n      payload: true\n    });\n  };\n};\nexport var cleanForm = function cleanForm() {\n  return function (dispatch) {\n    dispatch({\n      type: CLEAN_FORM\n    });\n    dispatch({\n      type: IS_OPEN_FORM,\n      payload: true\n    });\n  };\n};\nexport var searchTasks = function searchTasks() {\n  var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    filterType: 'all',\n    filterProps: null\n  };\n  return function (dispatch) {\n    var filterType = filter.filterType,\n        filterProps = filter.filterProps;\n    var tasks = getAllTasks(filter);\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: filterType\n    });\n  };\n};\nexport var searchAllTasks = function searchAllTasks() {\n  return function (dispatch) {\n    var tasks = getAllTasks();\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: 'all'\n    });\n  };\n};\nexport var searchTodayTasks = function searchTodayTasks() {\n  return function (dispatch) {\n    var tasks = searchTasksForOneDay(moment().format(\"DD-MM-YYYY\")).sort(function (a, b) {\n      return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n    });\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: 'today'\n    });\n  };\n};\nexport var searchTomorrowTasks = function searchTomorrowTasks() {\n  return function (dispatch) {\n    var tasks = searchTasksForOneDay(moment().add(1, 'day').format(\"DD-MM-YYYY\")).sort(function (a, b) {\n      return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n    });\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: 'tomorrow'\n    });\n  };\n};\nexport var searchWeekTasks = function searchWeekTasks() {\n  return function (dispatch) {\n    var week = [];\n\n    for (var i = 1; i <= 7; i++) {\n      week.push.apply(week, _toConsumableArray(searchTasksForOneDay(moment().isoWeekday(i).format(\"DD-MM-YYYY\"))));\n    }\n\n    var tasks = week.sort(function (a, b) {\n      return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n    });\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: 'week'\n    });\n  };\n};\nexport var searchMonthTasks = function searchMonthTasks() {\n  return function (dispatch) {\n    var month = [];\n\n    for (var i = 1; i <= moment().daysInMonth(); i++) {\n      month.push.apply(month, _toConsumableArray(searchTasksForOneDay(moment().date(i).format(\"DD-MM-YYYY\"))));\n    }\n\n    var tasks = month.sort(function (a, b) {\n      return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n    });\n    dispatch({\n      type: FILTER_TASKS,\n      payload: tasks\n    });\n    dispatch({\n      type: SWITCH_BUTTON,\n      payload: 'month'\n    });\n  };\n};","map":{"version":3,"sources":["/home/den/project/etagiToDo/src/actions/listTasksAction.js"],"names":["getAllTasks","deleteTask","putTask","moment","SWITCH_BUTTON","TASK","FILTER_TASKS","EDIT_TASK","CLEAN_FORM","IS_OPEN_FORM","searchTasksForOneDay","date","filter","task","dateStart","format","delTask","id","dispatch","tasks","type","payload","editTask","t","editTaskFromForm","body","cleanBody","cleanForm","searchTasks","filterType","filterProps","searchAllTasks","searchTodayTasks","sort","a","b","searchTomorrowTasks","add","searchWeekTasks","week","i","push","isoWeekday","searchMonthTasks","month","daysInMonth"],"mappings":"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","sourcesContent":["import { getAllTasks, deleteTask, putTask } from \"../apiService\";\nimport moment from 'moment';\nimport {SWITCH_BUTTON} from \"../reducers/listTaskReducers\";\n\nexport const TASK = \"GET_TASKS\";\nexport const FILTER_TASKS = \"FILTER_TASKS\";\nexport const EDIT_TASK = \"EDIT_TASK\";\nexport const CLEAN_FORM = \"CLEAN_FORM\";\nexport const IS_OPEN_FORM = \"IS_OPEN_FORM\";\n\nconst searchTasksForOneDay = (date) => getAllTasks().filter( task =>\n  moment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === date\n);\n\nexport const delTask = (id) => dispatch => {\n  deleteTask(id);\n  const tasks = getAllTasks();\n  dispatch({ type: TASK, payload: tasks })\n};\n\nexport const editTask = (id) => dispatch => {\n  const tasks = getAllTasks().filter(t => t.id === id)[0];\n  dispatch({ type: EDIT_TASK, payload: tasks });\n  dispatch({ type: IS_OPEN_FORM, payload: true });\n};\n\nexport const editTaskFromForm = (body) => dispatch => {\n  const cleanBody = {...body};\n  delete cleanBody.type;\n  putTask(cleanBody);\n  const tasks = getAllTasks();\n  dispatch({ type: TASK, payload: tasks });\n  dispatch({ type: IS_OPEN_FORM, payload: true });\n};\n\nexport const cleanForm = () => dispatch => {\n  dispatch({ type: CLEAN_FORM });\n  dispatch({ type: IS_OPEN_FORM, payload: true });\n};\n\nexport const searchTasks = (filter = {filterType: 'all', filterProps: null}) => dispatch => {\n  const { filterType, filterProps } = filter;\n  const tasks = getAllTasks(filter);\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: filterType\n  });\n};\n\nexport const searchAllTasks = () => dispatch => {\n  const tasks = getAllTasks();\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: 'all'\n  });\n};\n\nexport const searchTodayTasks = () => dispatch => {\n  const tasks = searchTasksForOneDay(moment().format(\"DD-MM-YYYY\")).sort(function(a, b){\n    return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n  });\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: 'today'\n  });\n};\n\nexport const searchTomorrowTasks = () => dispatch => {\n  const tasks = searchTasksForOneDay(moment().add(1, 'day').format(\"DD-MM-YYYY\")).sort(function(a, b){\n    return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n  });\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: 'tomorrow'\n  });\n};\n\nexport const searchWeekTasks = () => dispatch => {\n  const week = [];\n  for (var i = 1; i <= 7; i++) {\n    week.push(...searchTasksForOneDay(\n      moment().isoWeekday(i).format(\"DD-MM-YYYY\")\n    ))\n  }\n  const tasks = week.sort(function(a, b){\n    return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n  });\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: 'week'\n  });\n};\n\nexport const searchMonthTasks = () => dispatch => {\n\tconst month = [];\n\tfor (var i = 1; i <= moment().daysInMonth(); i++) {\n\t\tmonth.push(...searchTasksForOneDay(\n\t\t\tmoment().date(i).format(\"DD-MM-YYYY\")\n\t\t))\n\t}\n\tconst tasks = month.sort(function(a, b){\n    return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n  });\n  dispatch({\n    type: FILTER_TASKS,\n    payload: tasks\n  });\n  dispatch({\n    type: SWITCH_BUTTON,\n    payload: 'month'\n  });\n};\n"]},"metadata":{},"sourceType":"module"}