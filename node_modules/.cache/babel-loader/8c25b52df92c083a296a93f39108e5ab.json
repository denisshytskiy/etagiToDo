{"ast":null,"code":"import { deleteTask, getAllTasks } from \"../apiService\";\nimport moment from 'moment';\nimport { CLEAN_FORM, EDIT_TASK, IS_OPEN_FORM, TASK_FROM_DAY } from \"./listTasksAction\";\nexport var TASKS = \"TASKS_ON_MONTH\";\nexport var DUMP = \"DUMP_MONTH\";\nexport var SWITCH = \"SWITCH_MONTH\";\n\nvar searchTasks = function searchTasks(dateStart) {\n  return getAllTasks().filter(function (task) {\n    return moment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === dateStart;\n  }).sort(function (a, b) {\n    return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n  });\n};\n\nexport var cleanForm = function cleanForm() {\n  return function (dispatch) {\n    dispatch({\n      type: CLEAN_FORM\n    });\n  };\n};\nexport var delTask = function delTask(id) {\n  return function (dispatch) {\n    console.log(id);\n    deleteTask(id);\n    var tasks = getAllTasks();\n    dispatch({\n      type: TASKS,\n      payload: tasks\n    });\n  };\n};\nexport var editTask = function editTask(id) {\n  return function (dispatch) {\n    var tasks = getAllTasks().filter(function (t) {\n      return t.id === id;\n    })[0];\n    dispatch({\n      type: EDIT_TASK,\n      payload: tasks\n    });\n    dispatch({\n      type: IS_OPEN_FORM,\n      payload: true\n    });\n  };\n};\nexport var dumpMonth = function dumpMonth() {\n  return function (dispatch) {\n    var daysInMonth = moment().daysInMonth();\n    var firstMonthDate = moment().date(1).format(\"DD-MM-YYYY\");\n    var lastMonthDate = moment().date(daysInMonth).format(\"DD-MM-YYYY\");\n    var tasksOnMonth = [];\n\n    for (var i = 0; i < 31; i++) {\n      var date = moment(firstMonthDate, \"DD-MM-YYYY\").add(i, 'day').format(\"DD-MM-YYYY\");\n      tasksOnMonth.push({\n        date: date,\n        tasks: searchTasks(date)\n      });\n    }\n\n    console.log(tasksOnMonth);\n    dispatch({\n      type: TASKS,\n      payload: tasksOnMonth\n    });\n    dispatch({\n      type: DUMP,\n      payload: {\n        daysInMonth: daysInMonth,\n        firstMonthDate: firstMonthDate,\n        lastMonthDate: lastMonthDate\n      }\n    });\n  };\n};\nexport var changeMonth = function changeMonth(monthDays) {\n  return function (dispatch) {\n    var selectFirst = monthDays.selectFirst,\n        selectLast = monthDays.selectLast,\n        side = monthDays.side;\n    var firstMonthDate;\n    var lastMonthDate;\n\n    switch (side) {\n      case 'next':\n        {\n          firstMonthDate = moment(selectFirst, \"DD-MM-YYYY\").add(1, 'month').format(\"DD-MM-YYYY\");\n          lastMonthDate = moment(selectLast, \"DD-MM-YYYY\").add(1, 'month').format(\"DD-MM-YYYY\");\n          break;\n        }\n\n      case 'prev':\n        {\n          firstMonthDate = moment(selectFirst, \"DD-MM-YYYY\").subtract(1, 'month').format(\"DD-MM-YYYY\");\n          lastMonthDate = moment(selectLast, \"DD-MM-YYYY\").subtract(1, 'month').format(\"DD-MM-YYYY\");\n          break;\n        }\n    }\n\n    var tasksOnMonth = [];\n\n    for (var i = 0; i < 31; i++) {\n      var date = moment(firstMonthDate, \"DD-MM-YYYY\").add(i, 'day').format(\"DD-MM-YYYY\");\n      tasksOnMonth.push({\n        date: date,\n        tasks: searchTasks(date)\n      });\n    }\n\n    dispatch({\n      type: TASKS,\n      payload: tasksOnMonth\n    });\n    dispatch({\n      type: SWITCH,\n      payload: {\n        firstMonthDate: firstMonthDate,\n        lastMonthDate: lastMonthDate\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/home/den/project/etagiToDo/src/actions/CalendarMonthAction.js"],"names":["deleteTask","getAllTasks","moment","CLEAN_FORM","EDIT_TASK","IS_OPEN_FORM","TASK_FROM_DAY","TASKS","DUMP","SWITCH","searchTasks","dateStart","filter","task","format","sort","a","b","cleanForm","dispatch","type","delTask","id","console","log","tasks","payload","editTask","t","dumpMonth","daysInMonth","firstMonthDate","date","lastMonthDate","tasksOnMonth","i","add","push","changeMonth","monthDays","selectFirst","selectLast","side","subtract"],"mappings":"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","sourcesContent":["import {deleteTask, getAllTasks} from \"../apiService\";\nimport moment from 'moment';\nimport {CLEAN_FORM, EDIT_TASK, IS_OPEN_FORM, TASK_FROM_DAY} from \"./listTasksAction\";\n\nexport const TASKS = \"TASKS_ON_MONTH\";\nexport const DUMP = \"DUMP_MONTH\";\nexport const SWITCH = \"SWITCH_MONTH\";\n\nconst searchTasks = (dateStart) => getAllTasks().filter( task =>\n\tmoment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === dateStart\n).sort(function(a, b){\n\treturn moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n});\n\nexport const cleanForm = () => dispatch => {\n\tdispatch({ type: CLEAN_FORM })\n};\n\nexport const delTask = (id) => dispatch => {\n\tconsole.log(id);\n\tdeleteTask(id);\n\tconst tasks = getAllTasks();\n\tdispatch({ type: TASKS, payload: tasks })\n};\n\nexport const editTask = (id) => dispatch => {\n\tconst tasks = getAllTasks().filter(t => t.id === id)[0];\n\tdispatch({ type: EDIT_TASK, payload: tasks });\n\tdispatch({ type: IS_OPEN_FORM, payload: true });\n};\n\nexport const dumpMonth = () => dispatch => {\n\tconst daysInMonth = moment().daysInMonth();\n\tconst firstMonthDate = moment().date(1).format(\"DD-MM-YYYY\");\n\tconst lastMonthDate = moment().date(daysInMonth).format(\"DD-MM-YYYY\");\n\tconst tasksOnMonth = [];\n\tfor (let i = 0; i < 31; i++) {\n\t\tconst date = moment(firstMonthDate, \"DD-MM-YYYY\").add(i, 'day').format(\"DD-MM-YYYY\");\n\t\ttasksOnMonth.push({\n\t\t\tdate,\n\t\t\ttasks: searchTasks(date)})\n\t}\n\tconsole.log(tasksOnMonth);\n\tdispatch({\n\t\ttype: TASKS,\n\t\tpayload: tasksOnMonth\n\t});\n\tdispatch({\n\t\ttype: DUMP,\n\t\tpayload: { daysInMonth, firstMonthDate, lastMonthDate }\n\t})\n};\n\nexport const changeMonth = (monthDays) => dispatch => {\n\tconst {selectFirst, selectLast, side} = monthDays;\n\tlet firstMonthDate;\n\tlet lastMonthDate;\n\tswitch (side) {\n\t\tcase 'next': {\n\t\t\tfirstMonthDate = moment(selectFirst, \"DD-MM-YYYY\").add(1, 'month').format(\"DD-MM-YYYY\");\n\t\t\tlastMonthDate = moment(selectLast, \"DD-MM-YYYY\").add(1, 'month').format(\"DD-MM-YYYY\");\n\t\t\tbreak;\n\t\t}\n\t\tcase 'prev': {\n\t\t\tfirstMonthDate = moment(selectFirst, \"DD-MM-YYYY\").subtract(1, 'month').format(\"DD-MM-YYYY\");\n\t\t\tlastMonthDate = moment(selectLast, \"DD-MM-YYYY\").subtract(1, 'month').format(\"DD-MM-YYYY\");\n\t\t\tbreak;\n\t\t}\n\t}\n\tconst tasksOnMonth = [];\n\tfor (let i = 0; i < 31; i++) {\n\t\tconst date = moment(firstMonthDate, \"DD-MM-YYYY\").add(i, 'day').format(\"DD-MM-YYYY\");\n\t\ttasksOnMonth.push({\n\t\t\tdate,\n\t\t\ttasks: searchTasks(date)})\n\t}\n\tdispatch({\n\t\ttype: TASKS,\n\t\tpayload: tasksOnMonth\n\t});\n\tdispatch({\n\t\ttype: SWITCH,\n\t\tpayload: { firstMonthDate, lastMonthDate }\n\t})\n};\n"]},"metadata":{},"sourceType":"module"}