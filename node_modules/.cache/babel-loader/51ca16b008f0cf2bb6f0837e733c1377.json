{"ast":null,"code":"import _objectSpread from \"/home/den/project/etagiToDo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/den/project/etagiToDo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport uuid from 'uuid/v4';\nimport moment from 'moment';\n\nvar searchTasksForOneDay = function searchTasksForOneDay(date) {\n  return getAllTasks().filter(function (task) {\n    return moment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === date;\n  });\n};\n\nexport var getAllTasks = function getAllTasks() {\n  var _filterTasks, _filterTasks2;\n\n  var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    filterType: 'all',\n    filterProps: null\n  };\n  var tasks = JSON.parse(localStorage.getItem(\"tasks\")) || [];\n  var filterType = filter.filterType,\n      filterProps = filter.filterProps;\n  var filterTasks = [];\n\n  switch (filterType) {\n    case 'all':\n      (_filterTasks = filterTasks).push.apply(_filterTasks, _toConsumableArray(tasks.sort(function (a, b) {\n        return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n      })));\n\n      break;\n\n    case 'day':\n      (_filterTasks2 = filterTasks).push.apply(_filterTasks2, _toConsumableArray(searchTasksForOneDay(filterProps).sort(function (a, b) {\n        return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n      })));\n\n      break;\n\n    case 'weekList':\n      {\n        var week = [];\n\n        for (var _i = 1; _i <= 7; _i++) {\n          week.push.apply(week, _toConsumableArray(searchTasksForOneDay(moment().isoWeekday(_i).format(\"DD-MM-YYYY\"))));\n        }\n\n        filterTasks = week.sort(function (a, b) {\n          return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n        });\n      }\n\n    case 'monthList':\n      {\n        var month = [];\n\n        for (var i = 1; i <= moment().daysInMonth(); i++) {\n          month.push.apply(month, _toConsumableArray(searchTasksForOneDay(moment().date(i).format(\"DD-MM-YYYY\"))));\n        }\n\n        filterTasks = month.sort(function (a, b) {\n          return moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X') - moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X');\n        });\n      }\n\n    case 'weekGroup':\n      {\n        for (var _i2 = 0; _i2 < 7; _i2++) {\n          var date = moment(filterProps, \"DD-MM-YYYY\").add(_i2, 'day').format(\"DD-MM-YYYY\");\n          filterTasks.push({\n            date: date,\n            tasks: searchTasksForOneDay(date)\n          });\n        }\n      }\n  }\n\n  return filterTasks;\n};\nexport var postTask = function postTask(body) {\n  var tasks = getAllTasks();\n\n  var newTask = _objectSpread({\n    id: uuid()\n  }, body);\n\n  tasks.push(newTask);\n  var serialTasks = JSON.stringify(tasks);\n  localStorage.setItem(\"tasks\", serialTasks);\n};\nexport var putTask = function putTask(body) {\n  var tasks = getAllTasks();\n  var newTasks = tasks.map(function (task) {\n    return task.id === body.id ? body : task;\n  });\n  var serialTasks = JSON.stringify(newTasks);\n  localStorage.setItem(\"tasks\", serialTasks);\n};\nexport var deleteTask = function deleteTask(id) {\n  var tasks = getAllTasks().filter(function (task) {\n    return task.id !== id;\n  });\n  var serialTasks = JSON.stringify(tasks);\n  localStorage.setItem(\"tasks\", serialTasks);\n};","map":{"version":3,"sources":["/home/den/project/etagiToDo/src/apiService.js"],"names":["uuid","moment","searchTasksForOneDay","date","getAllTasks","filter","task","dateStart","format","filterType","filterProps","tasks","JSON","parse","localStorage","getItem","filterTasks","push","sort","a","b","week","i","isoWeekday","month","daysInMonth","add","postTask","body","newTask","id","serialTasks","stringify","setItem","putTask","newTasks","map","deleteTask"],"mappings":"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","sourcesContent":["import uuid from 'uuid/v4';\nimport moment from  'moment';\n\nconst searchTasksForOneDay = (date) => getAllTasks().filter( task =>\n\tmoment(task.dateStart, \"YYYY-MM-DDTHH:mm\").format(\"DD-MM-YYYY\") === date\n);\n\nexport const getAllTasks = (filter = {filterType: 'all', filterProps: null}) => {\n\tconst tasks = JSON.parse(localStorage.getItem(\"tasks\")) || [];\n\tconst { filterType, filterProps } = filter;\n\tlet filterTasks = [];\n\tswitch (filterType) {\n\t\tcase 'all':\n\t\t\tfilterTasks.push(...tasks.sort(function(a, b){\n\t\t\t\treturn moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n\t\t\t}));\n\t\t\tbreak;\n\t\tcase 'day':\n\t\t\tfilterTasks.push(...searchTasksForOneDay(filterProps).sort(function(a, b){\n\t\t\t\treturn moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n\t\t\t}));\n\t\t\tbreak;\n\t\tcase 'weekList':\n\t\t{\n\t\t\tconst week = [];\n\t\t\tfor (let i = 1; i <= 7; i++) {\n\t\t\t\tweek.push(...searchTasksForOneDay(\n\t\t\t\t\tmoment().isoWeekday(i).format(\"DD-MM-YYYY\")\n\t\t\t\t))\n\t\t\t}\n\t\t\tfilterTasks = week.sort(function(a, b){\n\t\t\t\treturn moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n\t\t\t});\n\t\t}\n\t\tcase 'monthList':\n\t\t{\n\t\t\tconst month = [];\n\t\t\tfor (var i = 1; i <= moment().daysInMonth(); i++) {\n\t\t\t\tmonth.push(...searchTasksForOneDay(\n\t\t\t\t\tmoment().date(i).format(\"DD-MM-YYYY\")\n\t\t\t\t))\n\t\t\t}\n\t\t\tfilterTasks = month.sort(function(a, b){\n\t\t\t\treturn moment(a.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')-moment(b.dateStart, \"YYYY-MM-DDTHH:mm\").format('X')\n\t\t\t});\n\t\t}\n\t\tcase 'weekGroup':\n\t\t{\n\t\t\tfor (let i = 0; i < 7; i++) {\n\t\t\t\tconst date = moment(filterProps, \"DD-MM-YYYY\").add(i, 'day').format(\"DD-MM-YYYY\");\n\t\t\t\tfilterTasks.push({\n\t\t\t\t\tdate,\n\t\t\t\t\ttasks: searchTasksForOneDay(date)})\n\t\t\t}\n\t\t}\n\t}\n\treturn filterTasks;\n};\n\nexport const postTask = (body) => {\n\tconst tasks = getAllTasks();\n\tconst newTask = {\n\t\tid: uuid(),\n\t\t...body\n\t};\n\ttasks.push(newTask);\n\tconst serialTasks = JSON.stringify(tasks);\n\tlocalStorage.setItem(\"tasks\", serialTasks);\n};\n\nexport const putTask = (body) => {\n\tconst tasks = getAllTasks();\n\tconst newTasks = tasks.map(task => (task.id === body.id) ? body : task);\n\tconst serialTasks = JSON.stringify(newTasks);\n\tlocalStorage.setItem(\"tasks\", serialTasks);\n};\n\nexport const deleteTask = (id) => {\n\tconst tasks = getAllTasks().filter(task => task.id !== id);\n\tconst serialTasks = JSON.stringify(tasks);\n\tlocalStorage.setItem(\"tasks\", serialTasks);\n};\n"]},"metadata":{},"sourceType":"module"}